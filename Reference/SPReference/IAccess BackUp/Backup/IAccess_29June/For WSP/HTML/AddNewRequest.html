<link type="text/css" href="../../SiteAssets/IAccessFiles/CSS/Addnewrequest.css" rel="stylesheet">

<ng-form name="myForm">
<div class="form_container" ng-controller="NewRequest as ctrl">
    <h2 class="md-title client">New Request</h2>
    <div name="userForm">
        <div layout="row">
            <div layout="column" layout-align="center center" flex="33" flex-xs="100">
                <md-input-container class="width-90">
	                <div layout="row">
		                <div layout="column" layout-align="center center" flex="10">
		                	<label id="requestforLbl">Request For</label>
		                </div>
		                <div layout="column" layout-align="center start" flex="90">
		                	 <md-radio-group ng-model="ctrl.requestfor" ng-change="ctrl.onrequestChange()">
					            <md-radio-button value="Self" class="md-primary">Self</md-radio-button>
					            <md-radio-button value="Others" class="md-primary">Others</md-radio-button>
			        		 </md-radio-group>
		                </div>
					</div>              
                   
                </md-input-container>
            </div>
            <div layout="column" layout-align="center center" flex="33" flex-xs="100">
                <md-input-container class="width-90">
                    <label>Request Details</label>
                    <textarea name="RequestDetails" rows="1" md-select-on-focus md-no-autogrow ng-model="ctrl.RequestDetails" ng-click="ctrl.focusIn()" ng-blur="ctrl.validate()" required md-maxlength="512" minlength="1"></textarea> 
                    <div ng-messages="myForm.RequestDetails.$error" ng-show="myForm.RequestDetails.$dirty">
                        <div ng-message="required">This is required!</div>
                        <div ng-message="md-maxlength">That's too long!</div>
                        <div ng-message="minlength">That's too short!</div>
                    </div>
                </md-input-container>
            </div>
            <div layout="column" layout-align="center center" flex="33" flex-xs="100">
                <md-input-container class="width-90">
                    <label>Request Id</label>
                    <input name="RequestID" ng-model="ctrl.RequestID" disabled required >
                    <div ng-messages="RequestID.$error" ng-show="RequestID.$dirty">
                        <div ng-message="required">This is required!</div>
                        <div ng-message="md-maxlength">That's too long!</div>
                        <div ng-message="minlength">That's too short!</div>
                    </div>
                </md-input-container>
            </div>

        </div>
        <div layout="row">
            <div layout="column" layout-align="center center" flex="50" flex-xs="100">
                    <div class="width-90">
                        <label class="employee">Employee / User Id</label><span id="asterikSpan">*</span>
                        <md-contact-chips
                            ng-class="{'readonly': ctrl.readonly}"
							ng-model="ctrl.Employee"							
							md-ngchange="ctrl.EmployeeChange"
							md-contacts="ctrl.EmployeedelayedQuerySearch($query)"
							md-contact-name="name"
							md-contact-image="image"
							md-contact-email="email"
							md-require-match="true"
                            md-highlight-flags="i"
                            md-contact-max-chips=1
							filter-selected="ctrl.EmployeefilterSelected"
							placeholder="Add an Employee">
				        </md-contact-chips>  
				        <div ng-messages="(myForm.$submitted || myForm.name.$touched) && myForm.name.$error" class="customMessages">
                        <div ng-message="required">User is required</div>
                        <div ng-message="resolve">One or more users have not been resolved</div>
                    </div>     
                	</div>                    
            </div>
            <div layout="column" layout-align="center center" flex="50" flex-xs="100">
                    <div class="width-90">
                           
                            <label class="manager">Manager</label><span id="asterikSpan">*</span>
                       
                            <md-contact-chips  
                                                           
                                ng-model="ctrl.Managers"
                                ng-change="ManagersChange()"
                                md-contacts="ctrl.ManagersdelayedQuerySearch($query)"
                                md-contact-name="name"
                                md-contact-image="image"
                                md-contact-email="email"
                                md-require-match="true"
                                md-highlight-flags="i"
                                md-contact-max-chips=1
                                filter-selected="ctrl.ManagersfilterSelected"
                                placeholder="Add a Manager">
                            </md-contact-chips>  
                       
                    </div>                   
            </div>
            <div layout="column" layout-align="center center" flex="33" flex-xs="100">
                <md-input-container class="width-90 select category">
                    <label>Category</label>
                      <md-select  title="Please select the category" name="category" ng-model="ctrl.category"  aria-label="Category" required>
                            <md-option ng-value="opt.ID" ng-repeat="opt in ctrl.optCategory">{{ opt.Title }}</md-option>   
                                
                      </md-select>                                         
                    <div ng-messages="myForm.category.$error" ng-show="myForm.category.$dirty">
                        <div ng-message="required">This is required!</div>
                    </div>
                </md-input-container>
            </div>

        </div>
        
        <div flex layout-margin-lg layout="row" layout-align="end end" class="formbtnbg">
            <md-button class="md-raised md-primary md-button md-ink-ripple" id="saveBtn" ng-disabled="!(myForm.$valid)" ng-click="saveitem()">Save</md-button>
            <md-button class="md-raised md-primary md-button black-color" id="cancelBtn" ng-click="cancelitem()">Cancel</md-button>
        </div>
    </div>
</div>
</ng-form>